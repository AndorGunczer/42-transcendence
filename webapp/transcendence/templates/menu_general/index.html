{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>transcendence</title>
    <meta name="csrf-token" content="{{ csrf_token }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <div id="error-layer" class="d-flex flex-column position-fixed fixed-top pe-none">

    </div>
    <div class="header">

    </div>
    <div class="container-fluid d-flex flex-column align-items-center justify-content-center" id="main">
     
    </div>
    <button onclick="simulateError()">ERROR</button>
    <script src="{% static 'js/menu.js' %}"></script>
    <script src="{% static 'js/game.js' %}"></script>
    <script src="{% static 'js/user_management.js' %}"></script>
    <script src="{% static 'js/token_management.js' %}"></script>
    <script src="{% static 'js/socket.js' %}"></script>
    <script type="text/javascript">
        // Pass the Django context object to JavaScript
        const obj = {
            authenticated: `{{ authenticated }}`,
            username: "{{ username }}",
            wins: "{{ wins }}",
            losses: "{{ losses }}"
        };

        console.log(obj);

        // Ensure the authenticated flag is treated as a boolean
        const isAuthenticated = obj.authenticated == "True";
        console.log(isAuthenticated)

        // Use the authenticated flag to determine chatSocket initialization
        chatSocket = isAuthenticated ?  new ChatSocket() : null;
        console.log(chatSocket)

    </script>
</body>
</html>